<!DOCTYPE html>
<html lang="zh-CN">





<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/you.png">
  <link rel="icon" type="image/png" href="/img/you.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="description" content>
  <meta name="author" content="Aubreyii">
  <meta name="keywords" content>
  <title>DC小分子赛 - Deep Playing</title>

  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/5.12.1/css/all.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/mdbootstrap/4.13.0/css/mdb.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/3.0.1/github-markdown.min.css">
<link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">


  <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css">

<link rel="stylesheet" href="/css/main.css">


  <link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css">


<!-- 自定义样式保持在最底部 -->


</head>

<body>
  <header style="height: 100vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Deep Playing</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">首页</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">归档</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">分类</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">关于</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/links/">友链</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('https://s1.ax1x.com/2020/03/18/8wE0bD.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              
                <p class="mt-3 post-meta">
                  <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                  星期四, 三月 12日 2020, 2:39 下午
                </p>
              

              <p class="mt-1">
                
                  
                  <span class="post-meta">
                    <i class="far fa-chart-bar"></i>
                    1k 字
                  </span>
                

                
                  
                  <span class="post-meta">
                      <i class="far fa-clock"></i>
                      5 分钟
                  </span>
                

                
                  <!-- 不蒜子统计文章PV -->
                  
                  <span id="busuanzi_container_page_pv" class="post-meta" style="display: none">
                    <i class="far fa-eye" aria-hidden="true"></i>
                    <span id="busuanzi_value_page_pv"></span> 次
                  </span>
                
              </p>
            
          </div>

          
            <div class="scroll-down-bar">
              <i class="fas fa-angle-down scroll-down-arrow"></i>
            </div>
          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5 z-depth-3" id="board">
          <div class="post-content mx-auto" id="post">
            
            <div class="markdown-body">
              <h1 id="赛题"><a href="#赛题" class="headerlink" title="赛题"></a>赛题</h1><h2 id="任务"><a href="#任务" class="headerlink" title="任务"></a>任务</h2><p>根据小分子的属性特征，预测小分子在人体内清除率指标（即数据中的Label字段）。</p>
<h2 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h2><table>
<thead>
<tr>
<th>字段名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ID</td>
<td>整型</td>
<td>样本编号</td>
</tr>
<tr>
<td>Molecule_max_phase</td>
<td>整型</td>
<td>分子的最长位相</td>
</tr>
<tr>
<td>Molecular weight</td>
<td>浮点型</td>
<td>分子量</td>
</tr>
<tr>
<td>RO5_violations</td>
<td>整型</td>
<td>违反新药5规则（RO5）的数量</td>
</tr>
<tr>
<td>AlogP</td>
<td>浮点型</td>
<td>由ACD软件计算化合物的脂分配系数（该数据来自ChemBL）</td>
</tr>
<tr>
<td>Features</td>
<td>向量</td>
<td>小分子的矢量化表示</td>
</tr>
<tr>
<td>Label</td>
<td>枚举/浮点型</td>
<td>单位时间内单位机体能将多少容积体液中的药物清除</td>
</tr>
</tbody></table>
<p><strong>注：本比赛id列不能算做有效特征。</strong></p>
<h2 id="评分标准"><a href="#评分标准" class="headerlink" title="评分标准"></a>评分标准</h2><p>评分算法</p>
<p>采用<strong>RMSE</strong>，参考代码如下：</p>
<pre><code>import numpy as np
def calc_rmse(y_pred, y_true):
    return np.sqrt(((y_pred - y_true) ** 2).mean())

y_pred = np.array([1, 2, 1, 2, 3])
y_true = np.array([1, 1, 2, 2, 2])
rmse = calc_rmse(y_pred, y_true)</code></pre><h2 id="分数记录"><a href="#分数记录" class="headerlink" title="分数记录"></a>分数记录</h2><table>
<thead>
<tr>
<th align="center">编号</th>
<th align="center">处理</th>
<th align="center">线下</th>
<th>线上</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0323_1</td>
<td align="center">原始特征</td>
<td align="center">2.191179019653608</td>
<td></td>
</tr>
<tr>
<td align="center">0323_2</td>
<td align="center">features模</td>
<td align="center">2.196203627935492</td>
<td></td>
</tr>
<tr>
<td align="center">0323_3</td>
<td align="center">对Molecular_weight和AlogP进行exp</td>
<td align="center">2.1995688573340924</td>
<td></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td></td>
</tr>
</tbody></table>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="0323-1"><a href="#0323-1" class="headerlink" title="0323_1"></a>0323_1</h3><h4 id="进行的操作"><a href="#进行的操作" class="headerlink" title="进行的操作"></a>进行的操作</h4><p>无，即为原始特征</p>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><pre><code class="python">import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
import pandas as pd
import lightgbm as lgb
from tqdm import tqdm
import gc
import time
from numpy import nan
import category_encoders as ce
from sklearn.model_selection import GridSearchCV
from sklearn.model_selection import train_test_split,cross_val_score
pd.set_option(&#39;max_columns&#39;, None)
pd.set_option(&#39;max_rows&#39;, None)
pd.set_option(&#39;float_format&#39;, lambda x: &#39;%.6f&#39; % x)
from tqdm import tqdm
from sklearn.model_selection import GroupKFold
from sklearn.preprocessing import LabelEncoder
from sklearn import feature_selection
from sklearn.model_selection import KFold, StratifiedKFold
from scipy import stats
import datetime
import time
from scipy.stats import entropy, kurtosis
import multiprocessing
from gensim.models.word2vec import LineSentence
from gensim.corpora import WikiCorpus
from gensim.models import Word2Vec
from sklearn.metrics import f1_score, classification_report, mean_squared_error
import category_encoders as ce

seed = 2020
n_fold = 5

#读入
train=pd.read_csv(&#39;data/train_0312.csv&#39;)
test=pd.read_csv(&#39;data/test_noLabel_0312.csv&#39;)

#将Features 拆开
for i in tqdm(range(6924)):
 train[&#39;Features&#39;][i]=eval(train[&#39;Features&#39;][i])
for i in tqdm(range(1731)):
 test[&#39;Features&#39;][i]=eval(test[&#39;Features&#39;][i])
test=pd.concat([test,pd.DataFrame(test[&#39;Features&#39;].tolist())],axis=1)
train=pd.concat([train,pd.DataFrame(train[&#39;Features&#39;].tolist())],axis=1)

#确定使用的特征
ycol = &#39;Label&#39;
feature_names = list(
    filter(lambda x: x not in [ycol,&#39;ID&#39;,&#39;Features&#39;], train.columns))
model = lgb.LGBMRegressor(num_leaves=70,
                          max_depth=-1,
                          learning_rate=0.01,
                          n_estimators=10000,
                          subsample=0.9,
                          colsample_bytree=0.4,
                          random_state=seed,
                          metric=None
                          )

oof = []
prediction = test[[&#39;ID&#39;]]
prediction[&#39;Label&#39;] = 0
df_importance_list = []
#开始训练
kfold = KFold(n_splits=n_fold, shuffle=False, random_state=seed)
for fold_id, (trn_idx, val_idx) in enumerate(kfold.split(train[feature_names])):
    X_train = train.iloc[trn_idx][feature_names]
    Y_train = train.iloc[trn_idx][ycol]

    X_val = train.iloc[val_idx][feature_names]
    Y_val = train.iloc[val_idx][ycol]

    print(&#39;\nFold_{} Training ================================\n&#39;.format(fold_id+1))

    lgb_model = model.fit(X_train,
                          Y_train,
                          eval_names=[&#39;train&#39;, &#39;valid&#39;],
                          eval_set=[(X_train, Y_train), (X_val, Y_val)],
                          verbose=300,
                          eval_metric=&#39;rmse&#39;,
                          early_stopping_rounds=100
                          )

    pred_val = lgb_model.predict(X_val, num_iteration=lgb_model.best_iteration_)
    df_oof = train.iloc[val_idx][[&#39;ID&#39;, ycol]].copy()
    df_oof[&#39;pred&#39;] = pred_val
    oof.append(df_oof)

    pred_test = lgb_model.predict(test[feature_names], num_iteration=lgb_model.best_iteration_)
    prediction[&#39;Label&#39;] += pred_test / n_fold
    df_importance = pd.DataFrame({
        &#39;column&#39;: feature_names,
        &#39;importance&#39;: lgb_model.feature_importances_,
    })
    df_importance_list.append(df_importance)

    del lgb_model, pred_val, pred_test, X_train, Y_train, X_val, Y_val
    gc.collect()

df_importance = pd.concat(df_importance_list)
df_importance = df_importance.groupby([&#39;column&#39;])[&#39;importance&#39;].agg(
    &#39;mean&#39;).sort_values(ascending=False).reset_index()
df_importance

df_oof = pd.concat(oof)
rmse = np.sqrt(mean_squared_error(df_oof[ycol], df_oof[&#39;pred&#39;]))
print(&#39;rmse:&#39;, rmse)

df_sub = pd.read_csv(&#39;data/submit_examp_0312.csv&#39;)
sub = prediction.copy(deep=True)
sub.to_csv(&#39;submission/{}.csv&#39;.format(rmse), index=False, encoding=&#39;utf-8&#39;)</code></pre>
<h4 id="特征重要性"><a href="#特征重要性" class="headerlink" title="特征重要性"></a>特征重要性</h4><table>
<thead>
<tr>
<th align="right">column</th>
<th align="right">importance</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td align="right">0</td>
<td align="right">AlogP</td>
<td>4111.000000</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">3153</td>
<td>3345.200000</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">3154</td>
<td>3232.400000</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">3152</td>
<td>3205.800000</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">3163</td>
<td>2966.400000</td>
</tr>
<tr>
<td align="right">5</td>
<td align="right">3166</td>
<td>2814.800000</td>
</tr>
<tr>
<td align="right">6</td>
<td align="right">3157</td>
<td>2793.400000</td>
</tr>
<tr>
<td align="right">7</td>
<td align="right">3156</td>
<td>2685.000000</td>
</tr>
<tr>
<td align="right">8</td>
<td align="right">Molecular weight</td>
<td>2589.400000</td>
</tr>
<tr>
<td align="right">9</td>
<td align="right">3159</td>
<td>2526.600000</td>
</tr>
<tr>
<td align="right">10</td>
<td align="right">3161</td>
<td>2197.000000</td>
</tr>
<tr>
<td align="right">11</td>
<td align="right">3155</td>
<td>2146.400000</td>
</tr>
<tr>
<td align="right">12</td>
<td align="right">3158</td>
<td>2116.600000</td>
</tr>
<tr>
<td align="right">13</td>
<td align="right">3151</td>
<td>1794.200000</td>
</tr>
<tr>
<td align="right">14</td>
<td align="right">11</td>
<td>1408.200000</td>
</tr>
<tr>
<td align="right">15</td>
<td align="right">8</td>
<td>1264.400000</td>
</tr>
<tr>
<td align="right">16</td>
<td align="right">3167</td>
<td>1181.400000</td>
</tr>
<tr>
<td align="right">17</td>
<td align="right">3162</td>
<td>1080.200000</td>
</tr>
<tr>
<td align="right">18</td>
<td align="right">6</td>
<td>1042.400000</td>
</tr>
<tr>
<td align="right">19</td>
<td align="right">16</td>
<td>903.800000</td>
</tr>
<tr>
<td align="right">20</td>
<td align="right">3164</td>
<td>887.400000</td>
</tr>
</tbody></table>
<p><strong>注：仅展示前20</strong></p>
<h3 id="0323-2"><a href="#0323-2" class="headerlink" title="0323_2"></a>0323_2</h3><h4 id="进行的操作-1"><a href="#进行的操作-1" class="headerlink" title="进行的操作"></a>进行的操作</h4><ol>
<li>features向量的模</li>
</ol>
<h4 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h4><pre><code class="python">train.fillna(method=&#39;ffill&#39;,inplace=True)
test.fillna(method=&#39;ffill&#39;,inplace=True)

train[&#39;mo&#39;]=0
test[&#39;mo&#39;]=0

a=lambda x:np.array(x)
for i in range(6924):
    train[&#39;mo&#39;][i]=np.linalg.norm(a(train[&#39;Features&#39;][i]))

for i in range(1731):
    test[&#39;mo&#39;][i]=np.linalg.norm(a(test[&#39;Features&#39;][i]))</code></pre>
<h4 id="特征重要性-1"><a href="#特征重要性-1" class="headerlink" title="特征重要性"></a>特征重要性</h4><table>
<thead>
<tr>
<th align="right">column</th>
<th align="right">importance</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td align="right">0</td>
<td align="right">AlogP</td>
<td>4235.400000</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">3153</td>
<td>3073.400000</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">3152</td>
<td>2963.800000</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">3154</td>
<td>2950.400000</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">3163</td>
<td>2847.400000</td>
</tr>
<tr>
<td align="right">5</td>
<td align="right">3166</td>
<td>2749.000000</td>
</tr>
<tr>
<td align="right">6</td>
<td align="right">mo</td>
<td>2670.200000</td>
</tr>
<tr>
<td align="right">7</td>
<td align="right">3157</td>
<td>2623.400000</td>
</tr>
<tr>
<td align="right">8</td>
<td align="right">3156</td>
<td>2566.800000</td>
</tr>
<tr>
<td align="right">9</td>
<td align="right">3159</td>
<td>2467.200000</td>
</tr>
<tr>
<td align="right">10</td>
<td align="right">Molecular weight</td>
<td>2212.200000</td>
</tr>
<tr>
<td align="right">11</td>
<td align="right">3158</td>
<td>1990.600000</td>
</tr>
<tr>
<td align="right">12</td>
<td align="right">3161</td>
<td>1979.400000</td>
</tr>
<tr>
<td align="right">13</td>
<td align="right">3155</td>
<td>1951.000000</td>
</tr>
<tr>
<td align="right">14</td>
<td align="right">3151</td>
<td>1489.800000</td>
</tr>
<tr>
<td align="right">15</td>
<td align="right">11</td>
<td>1315.200000</td>
</tr>
<tr>
<td align="right">16</td>
<td align="right">3167</td>
<td>1147.000000</td>
</tr>
<tr>
<td align="right">17</td>
<td align="right">8</td>
<td>1122.200000</td>
</tr>
<tr>
<td align="right">18</td>
<td align="right">6</td>
<td>968.400000</td>
</tr>
<tr>
<td align="right">19</td>
<td align="right">3162</td>
<td>931.400000</td>
</tr>
<tr>
<td align="right">20</td>
<td align="right">16</td>
<td>929.800000</td>
</tr>
</tbody></table>
<h2 id="画图"><a href="#画图" class="headerlink" title="画图"></a>画图</h2>
            </div>
            <hr>
            <div>
              <p>
                
                  <span>
                <i class="iconfont icon-inbox"></i>
                    
                      <a class="hover-with-bg" href="/categories/Machine-Learning/">Machine Learning</a>
                      &nbsp;
                    
                  </span>&nbsp;&nbsp;
                
                
              </p>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" rel="nofollow noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
              
            </div>

            
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc-start"></div>
<div id="toc">
  <p class="h5"><i class="far fa-list-alt"></i>&nbsp;目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  
    <!-- APlayer 音乐播放器 -->
    <div id="aplayer"></div>
    <script  src="https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.js" ></script>
<link  rel="stylesheet" href="https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.css" />
<script>
  const ap = new APlayer({
    container: document.getElementById('aplayer'),
    fixed: true,
    autoplay: 'false' === 'true',
    loop: 'all',
    order: 'random',
    preload: 'auto',
    audio: [{"name":"夏天的风","artist":"刘瑞琦","url":"/music/刘瑞琦 - 夏天的风 (Live).flac","cover":"http://p2.music.126.net/_RDkx-1ALrisLhdpTAg5_Q==/2457408488136735.jpg?param=130y130"},{"name":"致我的思春期","artist":"脸红的思春期","url":"/music/脸红的思春期 - 나의 사춘기에게.mp3","cover":"http://p1.music.126.net/5fOHbAii9M5SFWj78bpLzw==/109951163774726743.jpg?param=130y130"}]
  });
</script>

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    </div>
    
  <div>
    
      <!-- 不蒜子统计PV -->
      
      <span id="busuanzi_container_site_pv" style="display: none">
      总访问量 <span id="busuanzi_value_site_pv"></span> 次
    </span>
    
    
      <!-- 不蒜子统计UV -->
      
      <span id="busuanzi_container_site_uv" style="display: none">
      总访客数 <span id="busuanzi_value_site_uv"></span> 人
    </span>
    
  </div>


    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script type="text/javascript"
color="220,220,220" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/popper.js/1.16.1/umd/popper.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="https://cdn.staticfile.org/mdbootstrap/4.13.0/js/mdb.min.js" ></script>
<script  src="/js/main.js" ></script>


  <script  src="/js/lazyload.js" ></script>



  
  <script  src="https://cdn.staticfile.org/tocbot/4.10.0/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var navHeight = $('#navbar').height();
      var post = $('#post');
      var toc = $('#toc');
      var tocLimMax = post.offset().top + post.height() - navHeight;

      $(window).scroll(function () {
        var tocLimMin = $('#toc-start').offset().top - navHeight;
        var scroH = document.body.scrollTop + document.documentElement.scrollTop;

        if (tocLimMin <= scroH && scroH <= tocLimMax) {
          toc.css({
            'display': 'block',
            'position': 'fixed',
            'top': navHeight,
          });
        } else if (scroH <= tocLimMin) {
          toc.css({
            'position': '',
            'top': '',
          });
        } else if (scroH > tocLimMax) {
          toc.css('display', 'none');
        }
      });
      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '.post-content',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        scrollSmooth: true,
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc > p').css('visibility', 'visible');
      }
      var offset = $('#board-ctn').css('margin-right')
      $('#toc-ctn').css({
        'right': offset
      })
    });
  </script>







  <script defer src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




<!-- Plugins -->



  <script  src="https://cdn.staticfile.org/prettify/188.0.0/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  linenums');
      prettyPrint();
    })
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "DC小分子赛&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 40,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
      icon: "§"
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <script>
    $("#post img:not(.no-zoom img, img[no-zoom])").each(
      function () {
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "images");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      }
    );
  </script>





  
  
    <script>
      !function (e, t, a) {
        function r() {
          for (var e = 0; e < s.length; e++) s[e].alpha <= 0 ? (t.body.removeChild(s[e].el), s.splice(e, 1)) : (s[e].y--, s[e].scale += .004, s[e].alpha -= .013, s[e].el.style.cssText = "left:" + s[e].x + "px;top:" + s[e].y + "px;opacity:" + s[e].alpha + ";transform:scale(" + s[e].scale + "," + s[e].scale + ") rotate(45deg);background:" + s[e].color + ";z-index:99999");
          requestAnimationFrame(r)
        }

        function n() {
          var t = "function" == typeof e.onclick && e.onclick;
          e.onclick = function (e) {
            t && t(), o(e)
          }
        }

        function o(e) {
          var a = t.createElement("div");
          a.className = "heart", s.push({
            el: a,
            x: e.clientX - 5,
            y: e.clientY - 5,
            scale: 1,
            alpha: 1,
            color: c()
          }), t.body.appendChild(a)
        }

        function i(e) {
          var a = t.createElement("style");
          a.type = "text/css";
          try {
            a.appendChild(t.createTextNode(e))
          } catch (t) {
            a.styleSheet.cssText = e
          }
          t.getElementsByTagName("head")[0].appendChild(a)
        }

        function c() {
          return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
        }

        var s = [];
        e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) {
          setTimeout(e, 1e3 / 60)
        }, i(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"), n(), r()
      }(window, document);
    </script>
  








</body>
</html>
